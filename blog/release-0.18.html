<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">

  
    <title>Yeoman generator version 0.18.0 - Release announcement | IBM Blockchain Framework</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">

  <link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700%7CRoboto:400,700,700italic,400italic" rel="stylesheet" type="text/css">


  
    <link href="assets/css/normalize.css" rel="stylesheet">
    <link href="assets/css/main.css" rel="stylesheet">
    <link href="assets/css/footer.css" rel="stylesheet">
    <link href="assets/css/prettify.css" rel="stylesheet">
  

  

  <link href="/blog/atom.xml" type="application/atom+xml" rel="alternate" title="Concerto Blog Atom Feed">
</head>

<body class="">

  
  




<header class="page-header">
  <div class="container">
    <div class="mobile-bar">
      <h1 class="logo">
        <a href="/Blockchain-WW-Labs/Concerto/index.html"><img src="/Blockchain-WW-Labs/Concerto/assets/img/logo.png" alt=""></a>
      </h1>
      <button class="mobile-menu-toggle ir">open</button>
    </div>
    <nav class="main-menu">
      <ul class="main-nav">
        <li>
          <a href="/Blockchain-WW-Labs/Concerto/overview/overview.html">Overview</a>
        </li>
        <li>
          <a href="/Blockchain-WW-Labs/Concerto/start/getting-started.html">Getting Started</a>
        </li>
        <li>
          <a href="/Blockchain-WW-Labs/Concerto/concepts/">Concepts</a>
          <ul>
<li><a href="/Blockchain-WW-Labs/Concerto/concepts/businessnetwork.html">Business Network</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/concepts/businessnetworkdefinition.html">Business Network Definition</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/concepts/participantsandidentities.html">Participants and Identities</a></li>
</ul>

        </li>
        <li>
          <a href="/Blockchain-WW-Labs/Concerto/tasks/">Tasks</a>
          <ul>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/prerequisites.html">Installing Pre-requisites</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/deploybusinessnetwork.html">Deploy Business Network</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/createconnectionprofile.html">Create Connection Profile</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/bnd-define.html">Create a Business Network Definition</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/bnd-publish.html">Publish a Business Network Definition</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/genapp.html">Generating an Application</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/model-define.html">Create a Business Domain Model</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/model-publish.html">Publish a Business Domain Model</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/runtime-start.html">Start a Fabric Runtime</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/testing.html">Test a Business Network Definition</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/runtime-update.html">Update a Business Network Definition on Fabric</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/participant-add.html">Add a Participant</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/identity-issue.html">Issue an Identity for a Participant</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/identity-revoke.html">Revoke an Identity for a Participant</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/current-participant.html">Implementing access control using the current Participant</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/tasks/diagnostics.html">Diagnosing Problems</a></li>
</ul>

        </li>
        <li>
          <a href="/Blockchain-WW-Labs/Concerto/reference/">Reference</a>
          <ul>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/MeetTheModules.html">Meet the Modules</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/platforms.html">Supported Platforms</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/cto_language.html">Concerto Modeling Language</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/connectionprofile.html">Connection Profile</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/js_scripts.html">Transaction Processor Functions</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/commands.html">Concerto Command Line</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/concerto.generator.tests.html">Concerto Generator</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/concerto.participant.add.html">Concerto CLI Add Participant</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/concerto.identity.issue.html">Concerto CLI Issue Identity</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/concerto.identity.revoke.html">Concerto CLI Revoke Identity</a></li>
<li><a target="_blank" href="/Blockchain-WW-Labs/Concerto/jsdoc/develop/index.html">API Documentation</a></li>
<li><a href="/Blockchain-WW-Labs/Concerto/reference/glossary.html">Glossary</a></li>
</ul>

        </li>
        <li>
          <a href="/Blockchain-WW-Labs/Concerto/support/index.html">Support</a>
        </li>
      </ul>
    </nav>
  </div>
<!-- /.container -->
</header><!-- /.page-header -->

  

  <div class="SiteWrapper">
    
      <div id="content">
  <h2 class="page-title">
    <span class="container">Yeoman generator version 0.18.0 - Release announcement</span>
  </h2>

  <div class="container clearfix">
    

    <article class="main">
      

      <section class="content-chunk">
        
          <section>
  <div class="blog-post-meta clearfix">
    <p class="date">14 Oct 2014</p>
    <div class="social">
  <!--twitter-->
  <a href="https://twitter.com/share" class="twitter-share-button" data-text="" data-url="">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  <!--twitter-->

  <!--plus-->
  <script src="https://apis.google.com/js/plusone.js"></script><plus action="share"></plus>
  <!--plus-->

</div>

  </div>

  <div class="post">
    <p>Allo' Allo' today we're happy to announce the release of <a href="https://www.npmjs.com/package/yeoman-generator">yeoman-generator@0.18.0</a>!</p>

<p>It's been multiple months since our last minor version bump. This new release bring lots of new features and strive at improving the composability features (first introduced in 0.17).</p>

<h2 id="new-features">New features!</h2>

<h3 id="storing-prompt-answers">Storing prompt answers</h3>

<p>Using the <code>{store: true}</code> property on a prompt will store the user answers in a machine global storage. This mean next time the user run a generator, the default answer will be filled with the value previously stored.</p>

<p>Careful notice, providing a default value prevent user from returning empty answers.</p>

<p>Huge thanks to <a href="https://github.com/stefanbuck" class="user-mention">@stefanbuck</a> for the PR <a href="https://github.com/yeoman/generator/pull/688">https://github.com/yeoman/generator/pull/688</a></p>

<h3 id="new-file-system">New File System</h3>

<p>Since version 0.17, the Yeoman file system proved to be poorly designed to attack composability issues. That's why with 0.18 we release a completely rethought file system abstraction. You can see the discussion and design process <a href="https://github.com/yeoman/generator/issues/658">taking place in this issue</a>.</p>

<p>Every legacy methods (<code>this.write</code>, <code>this.copy</code>, <a href="http://yeoman.io/generator/actions.html">etc</a>) have been back ported to use this new system. So updating to 0.18.0 should magically improve your generator.</p>

<h4 id="new-fs-methods">New <code>fs</code> methods</h4>

<p>The core system can be accessed on <code>generator.fs</code>. This object is an instance of <a href="https://github.com/SBoudrias/mem-fs-editor">mem-fs-editor</a> and provide the same methods.</p>

<p>This system is way simpler than the current legacy method and doesn't do any kind of magic. It won't automatically compile templates (use <code>this.fs.copyTpl()</code> for this), it won't pass <code>this</code> as template context, and it won't automatically assume paths are relative to anything.</p>

<p>An example/usual usage would be:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="k">this</span><span class="p">.</span><span class="nx">fs</span><span class="p">.</span><span class="nx">copyTpl</span><span class="p">(</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">templatePath</span><span class="p">(</span><span class="s1">'mocha/base-test.js'</span><span class="p">),</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">destinationPath</span><span class="p">(</span><span class="s1">'test/index.js'</span><span class="p">),</span>
  <span class="p">{</span> <span class="nx">projectName</span><span class="o">:</span> <span class="s1">'my-awesome-module'</span> <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
<p>As you can see, we also added two new paths helpers:</p>

<ol>
<li>
<code>this.templatePath()</code> which is: <code>path.join(this.sourceRoot(), ...rest)</code>
</li>
<li>
<code>this.destinationPath()</code> which is: <code>path.join(this.destinationRoot(), ...rest)</code>
</li>
</ol>

<p>Try it out and please give us feedback on how you like this new API. It is more verbose than our legacy methods, but it is clearer and less magical.</p>

<p><em>Note that the legacy system will remain available at least until version 1.0.0</em></p>

<h4 id="what-about-the-0-17-0-this-src-and-this-dest-file-utils">What about the 0.17.0 <code>this.src</code> and <code>this.dest</code> file utils</h4>

<p>These should be considered deprecated. The design decision they make isn't a good fit with composability and will create issues on the long run.</p>

<h4 id="file-writing-filters">File writing filters</h4>

<p>Ever wished to apply custom filters on every file write? Beautifying files, normalizing whitespace, etc, is now possible.</p>

<p>Once per Yeoman process, we will write every modified files to disk. This process is passed through a <a href="https://github.com/wearefractal/vinyl">vinyl</a> object stream (just like <a href="http://gulpjs.com/">gulp</a>). Any author can register a <code>transformStream</code> to modify the file path or content.</p>

<p>For example:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="kd">var</span> <span class="nx">beautify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-beautify'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">registerTransformStream</span><span class="p">(</span><span class="nx">beautify</span><span class="p">({</span><span class="nx">indentSize</span><span class="o">:</span> <span class="mi">2</span> <span class="p">}));</span>
</code></pre></div>
<p>Note that <strong>every file type will be passed through this stream</strong>. So make sure any transform stream passthrough unsupported files. Tools like <a href="https://github.com/robrich/gulp-if">gulp-if</a> or <a href="https://github.com/sindresorhus/gulp-filter">gulp-filter</a> will help filter invalid type and pass them through.</p>

<p>This new feature means you can basically use any <em>gulp</em> plugins to process generated files during the writing phase.</p>

<h2 id="improvements">Improvements</h2>

<ul>
<li>Tests <a href="http://yeoman.io/authoring/testing.html">using <code>helpers.run()</code></a> won't output to the console keeping the test output clean. Every log method is now a <code>sinon.stub()</code> making it easy to assert your generator outputted the correct content.</li>
<li>Testing run context now automatically run your tests in a unique tmpdir. No need to manually call <code>helper.run().inDir()</code> anymore.</li>
<li>
<code>assert.fileContent</code> and <code>assert.noFileContent</code> accept a String as arguments (before we just accepted Regex)</li>
<li>The Conflicter have been refactored to be simple and easy to use.</li>
</ul>

<h3 id="installation-methods-only-running-once">Installation methods only running once</h3>

<p><code>npm</code> and <code>bower</code> installation helpers are now always running once per process. This was a change made in 0.17, but we extended the feature to cover every use/methods who could launch these process.</p>

<p>This was a breaking an edge case in 0.17. But for the sake of clarity, let's be clear. The following construct will break:</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span></span><span class="k">this</span><span class="p">.</span><span class="nx">installDependencies</span><span class="p">({</span>
  <span class="nx">callback</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">async</span><span class="p">()</span> <span class="c1">// This will block the process forever, and node will fail</span>
<span class="p">});</span>
</code></pre></div>
<p>Every install method will be registered on the <a href="http://yeoman.io/authoring/running-context.html"><code>install</code> run queue</a>. Using <code>this.async()</code> as a callback will create a deadlock.</p>

<h2 id="fixes">Fixes</h2>

<ul>
<li>Installation methods (npm, bower helpers) now correctly pass the options to the spawn process.</li>
<li>When a conflict occurs on a directory, we don't show the <code>diff</code> option anymore. (selecting diff on directory threw an error)</li>
<li>You can now correctly overwrite the <code>stdio</code> with <code>generator.spawnCommand()</code>
</li>
<li>
<code>generator.composeWith()</code> now correctly resolve the <code>local</code> option path.</li>
</ul>

<h2 id="meta">Meta</h2>

<ul>
<li>We've extracted <a href="https://github.com/yeoman/environment">yeoman-environment</a> on it's own repository. This mean these two core Yeoman parts can now evolve at their own pace.</li>
<li>All our tests now uses tmpdir for testing making them more reliable.</li>
<li>Completely remove network connection from our test suite - it is now way faster.</li>
</ul>

<h2 id="potentially-breaking-change">Potentially breaking change</h2>

<ul>
<li>We stopped manually mocking Inquirer in tests. Mainly because Inquirer parses values in ways we didn't imitate and this caused too much issue. Now we rely more on Inquirer and only mock the minimum. This also mean we don't create the magic <code>errors</code> property during test. You can listen for generator errors instead.</li>
<li>We removed <code>require('yeoman-generator').inquirer</code>. Require your own version from now on.</li>
<li>We removed <code>generator.shell</code> and <code>generator.request</code>. Require your own version.</li>
</ul>

<h2 id="in-conclusion">In conclusion</h2>

<p>The work is still not completed. We still need to update some of our website documentation to include the new APIs methods. And we'll need to update our core generators to this new version. These should come soon, in the meantime refer to this post about the new features.</p>

<p>So, enjoy this new release! Please upgrade and let us know how the API feels, and as usual feel free to report any bug you encounter!</p>

<p>Cheers</p>

  </div>

  <hr>

  <a href="blog">« View More Posts</a>
</section>

        

        
      </section>
    </article>
  </div>
</div>

    

    
    
<footer class="SiteFooter">
  <ul class="SiteFooter-links">
    <li>
      <a href="https://twitter.com/ibmblockchain" class="icon">
        <img src="assets/img/social-twitter.svg" class="SiteFooter-icon" alt="Twitter">
      </a>
    </li>
    <li>
      <a href="https://github.ibm.com/Blockchain-WW-Labs/Concerto/" class="icon">
        <img src="assets/img/social-github.svg" class="SiteFooter-icon" alt="Github">
      </a>
    </li>
    <li>
      <a href="/blog/atom.xml" class="icon">
        <img src="assets/img/social-feed.svg" class="SiteFooter-icon" alt="Feed">
      </a>
    </li>
    <li class="mobile-ln">
    </li>
<li>
      <a href="https://pages.github.ibm.com/Blockchain-WW-Labs/Concerto/jsdoc/develop/index.html" class="SiteFooter-button SiteFooter-button--light">APIs</a>
    </li>
  </ul>
</footer><!-- /.footer-links -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>

<script src="assets/js/libs/prettify.js"></script>
<script src="assets/js/script.js"></script>



    
  </div>
</body>
</html>
