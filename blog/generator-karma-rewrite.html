<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">

  
    <title>Karma Generator Rewrite 0.8.0 | IBM Blockchain Framework</title>
  
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <meta name="google-site-verification" content="fBQRJ6h7MV7_TJ7grbgq4P-d-07NRfDWPe4pqEEoH5w">

  <link href="//fonts.googleapis.com/css?family=Roboto+Slab:400,700%7CRoboto:400,700,700italic,400italic" rel="stylesheet" type="text/css">


  
    <link href="assets/css/normalize.css" rel="stylesheet">
    <link href="assets/css/main.css" rel="stylesheet">
    <link href="assets/css/footer.css" rel="stylesheet">
    <link href="assets/css/prettify.css" rel="stylesheet">
  

  

  <link href="/blog/atom.xml" type="application/atom+xml" rel="alternate" title="Concerto Blog Atom Feed">
</head>

<body class="">

  
  




<header class="page-header">
  <div class="container">
    <div class="mobile-bar">
      <h1 class="logo">
        <a href="/Blockchain-WW-Labs/Concerto/index.html"><img src="/Blockchain-WW-Labs/Concerto/assets/img/logo.png" alt=""></a>
      </h1>
      <button class="mobile-menu-toggle ir">open</button>
    </div>
    <nav class="main-menu">
      <ul class="main-nav">
        <li>
          <a  href="/Blockchain-WW-Labs/Concerto/overview/overview.html" >Overview</a>
        </li>
        <li>
          <a  href="/Blockchain-WW-Labs/Concerto/start/getting-started.html" >Getting Started</a>
        </li>
        <li>
          <a  href="/Blockchain-WW-Labs/Concerto/concepts/" >Concepts</a>
          <ul>
<li><a  href="/Blockchain-WW-Labs/Concerto/concepts/businessnetwork.html" >Business Network</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/concepts/businessnetworkdefinition.html" >Business Network Definition</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/concepts/participantsandidentities.html" >Participants and Identities</a></li>
</ul>

        </li>
        <li>
          <a  href="/Blockchain-WW-Labs/Concerto/tasks/" >Tasks</a>
          <ul>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/prerequisites.html" >Installing Pre-requisites</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/deploybusinessnetwork.html" >Deploy Business Network</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/createconnectionprofile.html" >Create Connection Profile</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/bnd-define.html" >Create a Business Network Definition</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/bnd-publish.html" >Publish a Business Network Definition</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/genapp.html" >Generating an Application</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/model-define.html" >Create a Business Domain Model</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/model-publish.html" >Publish a Business Domain Model</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/runtime-start.html" >Start a Fabric Runtime</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/testing.html" >Test a Business Network Definition</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/runtime-update.html" >Update a Business Network Definition on Fabric</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/participant-add.html" >Add a Participant</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/identity-issue.html" >Issue an Identity for a Participant</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/identity-revoke.html" >Revoke an Identity for a Participant</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/current-participant.html" >Implementing access control using the current Participant</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/tasks/diagnostics.html" >Diagnosing Problems</a></li>
</ul>

        </li>
        <li>
          <a  href="/Blockchain-WW-Labs/Concerto/reference/" >Reference</a>
          <ul>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/MeetTheModules.html" >Meet the Modules</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/platforms.html" >Supported Platforms</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/cto_language.html" >Concerto Modeling Language</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/connectionprofile.html" >Connection Profile</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/js_scripts.html" >Transaction Processor Functions</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/commands.html" >Concerto Command Line</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/concerto.generator.tests.html" >Concerto Generator</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/concerto.participant.add.html" >Concerto CLI Add Participant</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/concerto.identity.issue.html" >Concerto CLI Issue Identity</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/concerto.identity.revoke.html" >Concerto CLI Revoke Identity</a></li>
<li><a target='_blank' href="/Blockchain-WW-Labs/Concerto/jsdoc/develop/index.html" >API Documentation</a></li>
<li><a  href="/Blockchain-WW-Labs/Concerto/reference/glossary.html" >Glossary</a></li>
</ul>

        </li>
        <li>
          <a  href="/Blockchain-WW-Labs/Concerto/support/index.html" >Support</a>
        </li>
      </ul>
    </nav>
  </div><!-- /.container -->
</header><!-- /.page-header -->

  

  <div class="SiteWrapper">
    
      <div id="content">
  <h2 class="page-title">
    <span class="container">Karma Generator Rewrite 0.8.0</span>
  </h2>

  <div class="container clearfix">
    

    <article class="main">
      

      <section class="content-chunk">
        
          <section>
  <div class="blog-post-meta clearfix">
    <p class="date">12 May 2014</p>
    <div class="social">
  <!--twitter-->
  <a href="https://twitter.com/share" class="twitter-share-button" data-text="" data-url="">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
  <!--twitter-->

  <!--plus-->
  <script src="https://apis.google.com/js/plusone.js"></script><g:plus action="share"></g:plus>
  <!--plus-->

</div>

  </div>

  <div class="post">
    <p>Allo&#39; allo&#39;! Here&#39;s <a href="https://github.com/eddiemonge">Eddie</a> from the Yeoman team on the recent changes to the Karma Generator. The changes focused on configuration and testing.</p>

<h2 id="why-was-a-rewrite-necessary">Why was a Rewrite Necessary?</h2>

<p><strong>tl;dr</strong>: a rewrite was not necessary. The <a href="https://github.com/yeoman/generator">Angular generator</a> needed some changes to continue to work.</p>

<p>The <a href="http://karma-runner.github.io/">Karma Team</a> recently made some changes to the way Karma <a href="https://github.com/karma-runner/karma/blob/master/CHANGELOG.md#breaking-changes">installs its plugins</a>. Before, it would install a lot of default plugins. Now it does not install any plugins. Many people viewed this as a pretty bad change. In fact it is a great change because bloatware is not included anymore. Only the plugins users want are now installed.</p>

<p>The Angular generator used the Karma generator to write its testing components. The Karma change led to testing not working out of the box. The tests complained about not being able to do some things like launch browsers. A quick fix was to install the missing plugins as part of the Angular generation process. This was not an ideal fix as it made the project more fragile and less composable. A better solution was to make the Karma generator be more customizable.</p>

<p>Also, this was a good project to test the new 0.17.0 changes to the <a href="https://github.com/yeoman/generator">Generator system</a>.</p>

<h2 id="what-was-the-goal-of-the-rewrite">What was the Goal of the Rewrite?</h2>

<ul>
<li>Use the new 0.17.0 Yeoman Generator</li>
<li>Better testing overall</li>
<li>Support customizing almost everything in the Karma config</li>
<li>Install user requested Karma plugins (and required ones not explicitly specified)</li>
<li>Write Gruntfile.js config block and task</li>
</ul>

<h3 id="0-17-0-yeoman-generator">0.17.0 Yeoman Generator</h3>

<p><a href="https://github.com/sboudrias">Simon</a> recently made a lot of changes to the Yeoman Generator system that needed some real world testing. While every new feature wasn&#39;t tested, the core features got some exposure. This includes easier testing methods, simpler generator syntax and Gruntfile integration<a href="#coffeescript-gruntfile-support">*</a>.</p>

<h3 id="testing">Testing</h3>

<p>The new Generator system made testing the rewrite a pleasure instead of a dreaded task. It reduced the amount of code needed while making it more readable. That usually does not happen so it was a welcome change.</p>

<p>The generator tests now cover testing the options and file creation instead of doing both at the same time. This should ensure more accuracy from the tests as the pieces get tested on their own. Every source code change is verifiable; no more worrying about if this or that change will break the whole thing.</p>

<h3 id="customizations">Customizations</h3>

<p>There are few parts of the generator that are not customizable now. Here is a small list of the the options that are available:</p>

<ul>
<li>Specify what browsers to run the tests in (defaults to PhantomJS)</li>
<li>What framework to use (defaults to Jasmine)</li>
<li>Which files to test</li>
<li>What plugins to use. Missing plugins, like a framework or browser, get added by the generator.</li>
<li>Where the config files get written to (including the name and path)</li>
</ul>

<p>This is not the complete list. For that, check out the project&#39;s <a href="https://github.com/yeoman/generator-karma">README</a>.</p>

<h3 id="gruntfile">Gruntfile</h3>

<p>The generator also tries to add the appropriate Gruntfile configuration blocks and tasks. This is a welcome change from having to do it by hand and hoping to get it right. For Gruntfiles written in CoffeeScript, see the <a href="#coffeescript-gruntfile-support">CoffeeScript note</a>.</p>

<h6 id="coffeescript-gruntfile-support">CoffeeScript Gruntfile Support</h6>

<p>CoffeeScript does not have a parser to be able to read it programmatically and insert the config (if it does, pull requests are welcome). Because of this, the Generator system cannot write the configs. :(</p>

<h2 id="the-dark-side">The Dark Side</h2>

<p>Not everything is peachy though; there are a few downsides to this rewrite. The first, which is also an upside, is that this is no longer Angular-centric. <code>angular-scenario</code> and <code>angular-mock</code> are no longer installed by default. To use them, add them as components in the <code>bower-components</code> option. The other change is that there are not any more default plugins specified other than the two needed for Jasmine and PhantomJS.</p>

<h2 id="vs-karma-init">Vs <code>karma init</code></h2>

<p>With <code>karma init</code> isn&#39;t this generator kind of pointless?</p>

<p>No. <code>karma init</code> scaffolds out a basic configuration file but does not give the option to customize as much as this does. It also does not update the Gruntfile. This generator provides that, allows it to composed with other generators and installs dependencies.</p>

<h2 id="wrap-up">Wrap-Up</h2>

<p>Its my hope that this rewrite is a sign of things to come for the other Yeoman generators. If nothing else, at least the testing should bring smiles to many faces since it is better tested now.</p>

<p>As always, please file bug reports at the <a href="https://github.com/yeoman/generator-karma/issues">issues page</a>. Pull requests are always welcome but be sure to start with an issue proposing the change(s).</p>

  </div>

  <hr>

  <a href="blog">&laquo; View More Posts</a>
</section>

        

        
      </section>
    </article>
  </div>
</div>

    

    
    
<footer class="SiteFooter">
  <ul class="SiteFooter-links">
    <li>
      <a href="https://twitter.com/ibmblockchain" class="icon">
        <img src="assets/img/social-twitter.svg" class="SiteFooter-icon" alt="Twitter">
      </a>
    </li>
    <li>
      <a href="https://github.ibm.com/Blockchain-WW-Labs/Concerto/" class="icon">
        <img src="assets/img/social-github.svg" class="SiteFooter-icon" alt="Github">
      </a>
    </li>
    <li>
      <a href="/blog/atom.xml" class="icon">
        <img src="assets/img/social-feed.svg" class="SiteFooter-icon" alt="Feed">
      </a>
    </li>
    <li class="mobile-ln"></li>
    <li>
      <a href="https://pages.github.ibm.com/Blockchain-WW-Labs/Concerto/jsdoc/develop/index.html" class="SiteFooter-button SiteFooter-button--light">APIs</a>
    </li>
  </ul>
</footer><!-- /.footer-links -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>

<script src="assets/js/libs/prettify.js"></script>
<script src="assets/js/script.js"></script>



    
  </div>
</body>
</html>
